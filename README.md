# mon-homework-1

## Задание 1

**Q. Вас пригласили настроить мониторинг на проект. На онбординге вам рассказали, что проект представляет из себя платформу для вычислений с выдачей текстовых отчетов, которые сохраняются на диск. Взаимодействие с платформой осуществляется по протоколу http. Также вам отметили, что вычисления загружают ЦПУ. Какой минимальный набор метрик вы выведите в мониторинг и почему?**

A. В представленной ситуации стоит минимально вывести в мониторинг следующие метрики:

- Загруженность и средняя нагрузка на CPU. Обусловлено тем, что вычисления в ходе проекта загружают CPU.
- Количество операций чтения/записи и занятое место на диске, а также количество занятых inodes. В связи с тем, что отчеты сохраняются на диск, необходимо следить, что диск не перегружен и всегда есть свободные inodes, чтобы отчеты могли нормально сохраняться. 
- Доступность сервиса по http. Так как общение с сервисом происходит по протоколу http, нужно следить, что сервис доступен и не возвращает коды ошибок. Также стоит мониторить время задержки ответа от сервиса.

## Задание 2

**Q. Менеджер продукта посмотрев на ваши метрики сказал, что ему непонятно что такое RAM/inodes/CPUla. Также он сказал, что хочет понимать, насколько мы выполняем свои обязанности перед клиентами и какое качество обслуживания. Что вы можете ему предложить?**

A. ~~Предложить ему поучить матчасть~~ Предложить разработать SLO на основе которого можно будет вычислять SLI и выводить его на мониторинг.  В качестве основных метрик для SLO можно использовать процент доступности сервиса (количество возвращаемых HTTP-статусов отличных от 4хх и 5хх) и время задержки ответа. Также предложить договориться об SLA, для определения ответственности в случае нарушения SLO.

## Задание 3

**Q. Вашей DevOps команде в этом году не выделили финансирование на построение системы сбора логов. Разработчики в свою очередь хотят видеть все ошибки, которые выдают их приложения. Какое решение вы можете предпринять в этой ситуации, чтобы разработчики получали ошибки приложения?**

A. В случае отсутствия финансирования для поднятия собственной системы сбора логов, можно использовать Grafana Cloud, который в бесплатной подписке предлагает хранение 50 ГБ логов, либо если разработчикам интересны только ошибки, то можно предложить Sentry с бесплатной подпиской, которая предлагает запись 5к ошибок в месяц и 5 ГБ логов. В крайнем случае, если есть уже готовая система мониторинга, сделать кастомную метрику, которая через tail считывает файлы логов приложения и выводит в мониторинг ошибки.

## Задание 4

**Q. Вы, как опытный SRE, сделали мониторинг, куда вывели отображения выполнения SLA=99% по http кодам ответов. Вычисляете этот параметр по следующей формуле: summ_2xx_requests/summ_all_requests. Данный параметр не поднимается выше 70%, но при этом в вашей системе нет кодов ответа 5xx и 4xx. Где у вас ошибка?**

A. В формуле необходимо суммировать 2xx коды ответов с 3xx, т.к. 3xx коды уведомляют о перенаправлении и не считаются ошибочными. 

## Задание 5

**Q. Опишите основные плюсы и минусы pull и push систем мониторинга**

A. 
Плюсы pull-систем:
- В связи с тем, что в pull-системе центральный сервер отвечает за то, когда и какие метрики собираются с агентов, вероятность перегрузки сервера при приеме большого количества данных с агентов очень мала при правильной настройке расписаний.
- Более легкая отладка полученных данных с агентов.
Минусы pull-систем:
- Метрики обновляются только тогда, когда центральный сервер их запрашивает, из-за чего кратковременные изменения в них могут не попасть на мониторинг.
- Возрастает нагрузка на центральный сервер при частых запросах метрик.

Плюсы push-систем:
- Метрики с агентов приходят в реальном времени.
- Использование UDP позволяет увеличить производительность сбора метрик.
Минусы push-систем:
- Т.к. данные с агентов приходят неупорядоченно, есть вероятность устросить DDoS центральному серверу.
- Из-за особенностей протокола UDP есть вероятность потери передаваемых данных.

## Задание 6

**Q: Какие из ниже перечисленных систем относятся к push модели, а какие к pull? А может есть гибридные?**

A. 
- Prometheus: В основном pull-модель, но есть реализация push через Pushgateway (хотя все равно центральный сервер забирает метрики с Pushgateway по расписанию в соотвествии с pull-моделью)
- TICK: Push-модель
- Zabbix: гибрид
- VictoriaMetrics: гибрид
- Nagios: гибрид

## Задание 7

Интерфейс Chronograf:

![alt text](https://github.com/RiteHist/mon-homework-1/blob/main/media/1.PNG?raw=true)

## Задание 8

График утилизации CPU:

![alt text](https://github.com/RiteHist/mon-homework-1/blob/main/media/2.PNG?raw=true)

## Задание 9

Метрики docker:

![alt text](https://github.com/RiteHist/mon-homework-1/blob/main/media/3.PNG?raw=true)

